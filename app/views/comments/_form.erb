<% if current_user %>
<div class="flex w-full bg-white text-gray-700">
  <div class="transition-all">
    <%= link_to user_path(username: current_user.username), class: "w-10 flex items-center space-x-1 hover:underline" do %>
      <%= image_tag current_user.avatar_icon, alt: current_user.username, width: "50px", height: "50px", class: "w-10 h-10 object-cover rounded-full" %>
    <% end %>
  </div>
  <%= form_with(
    model: comment,
    url: "/posts/#{post.id}/comments",
    data: {
      turbo_frame: "comments",
      controller: "turbo-form comment-form markdown",
      markdown_min_height_value: "150px",
      markdown_placeholder_value: I18n.t("comments.placeholder"),
    },
    class: "grow"
  ) do |f| %>
    <div>
      <div data-markdown-target="editorContainer">
        <%= f.text_area(
          :body,
          data: {
            markdown_target: "editor",
            comment_form_target: "body",
          },
          class: "w-full resize-none min-h-[165px]"
        ) %>
      </div>
      <div class="markdown-body hidden px-5 min-h-[170px]" data-markdown-target="preview"></div>
    </div>
    <div class="flex items-center">
      <div class="hidden sm:flex">
        <div class="mr-3">
          <button class="bg-slate-50 border hover:bg-gray-50 block py-1 px-5 rounded-full emoji" data-action="comment-form#emoji">👍</button>
        </div>
        <div class="mr-3">
          <button class="bg-slate-50 border hover:bg-gray-50 block py-1 px-5 rounded-full emoji" data-action="comment-form#emoji">👏</button>
        </div>
        <div class="mr-3">
          <button class="bg-slate-50 border hover:bg-gray-50 block py-1 px-5 rounded-full emoji" data-action="comment-form#emoji">🤣</button>
        </div>
        <div class="mr-3">
          <button class="bg-slate-50 border hover:bg-gray-50 block py-1 px-5 rounded-full emoji" data-action="comment-form#emoji">👋</button>
        </div>
      </div>
      <div class="grow"></div>
      <div class="px-1">
        <button type="button" class="rounded-full p-relative p-2 hover:bg-gray-50 transition-all" title="<%=  I18n.t('posts.preview') %>" data-action="markdown#preview" data-markdown-target="previewButton">
          <%= image_tag "icons/preview.svg", alt: "preview", class: "w-5 h-5" %>
        </button>
        <button type="button" class="rounded-full p-relative p-2 hover:bg-gray-50 transition-all hidden" title="<%=  I18n.t('posts.edit') %>" data-action="markdown#edit" data-markdown-target="editorButton">
          <%= image_tag "icons/edit.svg", alt: "edit", class: "w-5 h-5" %>
        </button>
      </div>
      <div class="px-1">
        <%= f.submit I18n.t("comments.submit"), disabled: true, class: primary_button_class %>
      </div>
    </div>
  <% end %>
</div>
<% end %>
