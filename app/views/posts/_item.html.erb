<div id="<%= item.id %>" class="shadow-sm mb-4 rounded-lg relative bg-white p-4 transition-opacity animate-fade-in <%= strip_tags(item.html).length < 64 && !item.comments.present? ? "max-w-sm mx-auto" : "" %>">
  <div class="mb-3 flex items-center space-x-1">
    <div class="flex hover:underline items-center space-x-1 relative">
      <%= render partial: 'shared/avatar', locals: { user: item.user } %>
    </div>
    <time class="text-gray-400 text-sm"><%= time_ago_in_words(item.created_at) %></time>
    <div class="grow"></div>
  </div>
  <div class="markdown-body" style="<%= item.emoji_only? ? "font-size: 32px;" : "" %>">
    <%= item.html(400).html_safe %>
  </div>
  <div class="flex items-end">
    <div class="flex mt-3 items-center w-full flex-wrap overflow-hidden">
      <%= render partial: 'shared/post_reactions', locals: { current_user: current_user, post: item, reaction: @post_reaction } %>
      <div class="flex items-center flex-wrap">
      <% item.comments.order(created_at: :desc).limit(2).each do |comment| %>
        <div class="rounded-full bg-gray-50 flex items-center py-[4px] px-2 mr-1 text-sm my-1">
          <%= image_tag comment.user.avatar_icon, alt: comment.user.username,width:"20px", height: "20px", class: "mr-1 w-5 h-5 rounded-full block" %>
          <%= strip_tags(comment.html).truncate(20) %>
        </div>
      <% end %>
      </div>
      <%= link_to post_path(id: item.id), class: "cursor-pointer items-center flex rounded-full p-relative px-2 py-[4px] my-1 hover:bg-gray-100 bg-gray-50 transition-all", data: { turbo: false } do %>
        <% if item.comments.length > 0 %>
          <p class="text-gray-600 text-sm flex items-center space-x-1">
            <%= image_tag "icons/comment.svg", alt: "comment", width:"14px", height: "14px" %>
            <span class="text-xs"><%= item.comments.count %></span>
          </p>
        <% end %>
      <% end %>
      <div class="grow"></div>
    </div>
    <%= link_to post_path(id: item.id), class: "block rounded-full cursor-pointer p-relative p-2 hover:bg-gray-50 transition-all", data: { turbo: false } do %>
      <%= image_tag "icons/forward.svg", alt: "forward", class: "w-5 h-5" %>
    <% end %>
  </div>
</div>
